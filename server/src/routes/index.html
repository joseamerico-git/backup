<!DOCTYPE html>
<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Page Title</title>
</head>

<body>

    <form class="uploadForm" action="http://localhost:3001/api/produtos/upload" method="post"
        enctype="multipart/form-data">
        <label class="control-label">Select File</label>
        <input name="avatar" id="input-1" type="file" class="file">
        <br>
        <input type="text" id="cod" name="cod">

        <input type="submit" value="submit" />
    </form>

    <br />
    <br />

    <ul id="list">


    </ul>

    <script>

       
        
        

   



        const allData = async () => {
            const response = await axios.get('http://localhost:3001/api/imagens');
            return response.data.listImagens; // retorna apenas o array de Json
        }

        // para utilizar o resultado da Promise, é possível fazer o seguinte:
        allData().then((data) => {
            // aqui dentro, a variável 'data' contém o array de Json retornado pela Promise
            const url = null;
            data.forEach((imagem) => {
                  console.log(imagem)
                  adicionaImagem(`http://localhost:3001/files/${imagem.nome}`)
            });
        }).catch((error) => {
            console.log(error);
        });



        function adicionaImagem(url) {
            const body = document.getElementsByTagName("body")
            body.style ="background-color: antiquewhite"
            const li = document.createElement("list");
            const tagImg = document.createElement("img");
            const div = document.createElement("div");
            div.style = "width:150px; height:150px; padding:1rem;";
            div.appendChild(tagImg);
            tagImg.style = "width:100%;";
            li.style = "display:flex; flex-direction:row;";
            li.appendChild(div);
            tagImg.src = url;
            document.getElementById("list").appendChild(li);
        }




    </script>

</body>

</html>